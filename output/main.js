(()=>{var t={117:()=>{document.querySelectorAll(".header__menu ul").forEach((t=>{t.addEventListener("click",(t=>{t.stopPropagation();const e=t.target;if(console.log(e.nodeName),"A"!==e.nodeName)return;document.getElementsByClassName("activeText")[0].classList.remove("activeText");const n=e.closest("li");console.log(n),n.classList.add("activeText")}))}))},215:()=>{document.addEventListener("DOMContentLoaded",(function(){const t=document.querySelector(".slider"),e=t.querySelectorAll("img"),n=document.querySelector(".slider__images"),i=t.querySelector(".slider__dots");function a(t){n.querySelector(".active").classList.remove("active"),n.querySelector(".n"+t).classList.add("active"),e.forEach((t=>{t.classList.contains("active")?t.style.display="inline":t.style.display="none"})),i.querySelector(".active").classList.remove("active"),i.querySelector(".n"+t).classList.add("active")}e&&e.length&&(e.forEach(((t,e)=>{t.setAttribute("data-index",e),t.classList.add(`n${e}`),"0"==t.dataset.index&&t.classList.add("active"),t.classList.contains("active")?t.style.display="inline":t.style.display="none"})),e.forEach(((t,e)=>{let n=`<div class="slider__dots-item n${e} ${0===e?"active":""}" data-index="${e}"></div>`;i.innerHTML+=n})),i.querySelectorAll(".slider__dots-item").forEach((t=>{t.addEventListener("click",(function(){a(this.dataset.index)}))})),setInterval((()=>{let t=+n.querySelector(".active").dataset.index;a(t===e.length-1?0:t+1)}),5e3))}))}},e={};function n(i){var a=e[i];if(void 0!==a)return a.exports;var o=e[i]={exports:{}};return t[i](o,o.exports,n),o.exports}(()=>{"use strict";function t(){const t=localStorage.getItem("cart");return t?JSON.parse(t):[]}function e(){const t=localStorage.getItem("books");return t?JSON.parse(t):[]}function i(t){const e=document.querySelector(".header__icons__cart__num");localStorage.setItem("cart",JSON.stringify(t)),e.textContent=t.length}n(117),n(215);let a=[];function o(e){if((e=t()).length){let t=document.querySelectorAll(".card__text-btn");const n=document.querySelector(".header__icons__cart__num");n.classList.remove("invisible"),n.textContent=e.length,t.forEach((t=>{const n=t.closest(".output__card").dataset.id,i=e.includes(n);t.classList.toggle("in-the-cart",i),t.textContent=i?"in the cart":"buy now"}))}}a=t(),function(){const t=document.querySelector(".output"),e=document.querySelector(".header__icons__cart__num");t.addEventListener("click",(function(t){t.stopPropagation();const n=t.target;if(n.classList.contains("card__text-btn")){const t=n.closest(".output__card").dataset.id;n.classList.contains("in-the-cart")?(n.classList.remove("in-the-cart"),n.textContent="buy now",function(t,e){let n=t.indexOf(e);-1!==n&&(t.splice(n,1),i(t))}(a,t),"0"===e.textContent&&e.classList.add("invisible")):(n.classList.add("in-the-cart"),e.classList.remove("invisible"),n.textContent="in the cart",a.push(t),i(a))}}))}();const s=document.querySelector(".output"),c=document.querySelector(".loadMore");let r,l=[],d=[],u=6,v=1;!function(){document.querySelectorAll(".category__item").forEach(((t,e)=>{let n=`${t.textContent}`;t.dataset.number=`n${e}`,l.push(n)})),localStorage.setItem("targetCategory",l[0]);const t=document.querySelector(".category");t.addEventListener("click",((e,n)=>{e.stopPropagation();const i=e.target;var a;if("LI"===i.nodeName)return document.getElementsByClassName("activeItem")[0].classList.remove("activeItem"),i.classList.add("activeItem"),r=t.querySelector(".activeItem").textContent,s.innerHTML="",(a=d).splice(0,a.length),localStorage.setItem("targetCategory",r),v=1,y(r),o(n),r}))}();const m=async(t,n=l[0])=>{try{n=localStorage.getItem("targetCategory");const i=await fetch(`https://www.googleapis.com/books/v1/volumes?q="subject:${n}&printType=books&langRestrict=en&startIndex=${t}&maxResults=6&key=AIzaSyCCTTDDIA16TuouhGsfn-ANBuUPUgiM-Ck`);if(!i.ok)throw new Error(i.statusText);(await i.json()).items.forEach((t=>{const e={category:n,id:t.id,img:t.volumeInfo.imageLinks&&t.volumeInfo.imageLinks.thumbnail||"./img/img/no_cover_thumb.png",title:t.volumeInfo.title,author:t.volumeInfo.authors||"No authors",rating:t.volumeInfo.averageRating||0,review:t.volumeInfo.ratingsCount||0,summary:t.volumeInfo.description||t.volumeInfo.title,saleability:t.saleInfo.saleability,price:t.saleInfo.retailPrice&&t.saleInfo.retailPrice.amount,currency:t.saleInfo.retailPrice&&t.saleInfo.retailPrice.currencyCode};_(e),d.push(e),f(e)})),function(t){let n=e();0===n.length?localStorage.setItem("books",JSON.stringify(t)):t.forEach((t=>{n.find((e=>e.id===t.id))||(n.push(t),localStorage.setItem("books",JSON.stringify(n)))}))}(d)}catch(t){console.log(t)}};function g(t){const n=e();return t=localStorage.getItem("targetCategory"),n.filter((e=>e.category===t))}function y(t,e){u=s.children.length,0===g(t).length?m(0,t):(function(t,e){const n=6*v;const i=g(t).slice(u,n);i.length<6?m(u,t):i.forEach((t=>{_(t),f(t),o(e)}))}(t,e),o(e))}function _(t){const{id:e,img:n,author:i,title:a,rating:o,review:c,summary:r,saleability:l,price:d,currency:u}=t,v=`\n        <div class="output__card" data-id="${e}">\n            <div class="card__cover">\n                <img src=${n} alt="${n}"/>\n            </div>\n            <div class="card__text">\n                <div class="card__text-author">${i}</div>\n            <div class="card__text-title">${a}</div>\n                <div class="card__text-rating">\n                    ${o>0?'<div class="rating__icons">\n            <div class="rating__active"></div>\n        </div>':""}\n                    ${o>0?`<div class="rating__text">${c} review</div>`:""}\n                </div>\n                <div class="card__text-summary"><p>${r}</p></div>\n                ${"FOR_SALE"==l?`<div class="card__text-price"> ${d} ${u}</div>`:""}\n                <button class="card__text-btn">buy now</div>\n            </div>`;s.insertAdjacentHTML("beforeend",v)}function f(t){let e=s.querySelectorAll(".rating__active");for(let n=0;n<e.length;n++){let i=t.rating;if(i>0){const t=i/.05;e[n].style.width=t+"%"}else(i=0)&&(e[n].parentElement.parentElement.style.visibility="hidden",e[n].parentElement.style.visibility="hidden",e[n].nextSibling.style.display="none")}}y(r),c.addEventListener("click",(function(t,e,n){t.preventDefault(),v++,y(e),u+=6,o(n)}))})()})();